<div class="max-w-md mx-auto p-6 bg-base-200 rounded-xl shadow-md">
	<h2 class="text-xl font-bold text-center mb-6">Test Recorder</h2>

	<form [formGroup]="recordForm" (ngSubmit)="openCodeGen()">
		<!-- Test Name Input -->
		<label class="form-control w-full">
			<div class="label">
				<span class="label-text">Test Name</span>
				@if(recordForm.get('testName')?.touched && recordForm.get('testName')?.invalid){
				<span class="label-text-alt text-error">*Required</span>
				}
			</div>
			<input
				type="text"
				formControlName="testName"
				placeholder="Enter test name"
				class="input input-bordered w-full"
				[ngClass]="{
					'input-error': recordForm.get('testName')?.touched && recordForm.get('testName')?.invalid
				}" />
			@if(recordForm.get('testName')?.touched && recordForm.get('testName')?.invalid){
			<div class="label">
				<span class="label-text-alt text-error">Test name must be at least 3 characters</span>
			</div>
			}
		</label>

		<!-- URL Input -->
		<label class="form-control w-full mt-4">
			<div class="label">
				<span class="label-text">URL</span>
				@if(recordForm.get('url')?.touched && recordForm.get('url')?.invalid){
				<span class="label-text-alt text-error">*Required</span>
				}
			</div>
			<input
				type="text"
				formControlName="url"
				placeholder="https://example.com"
				class="input input-bordered w-full"
				[ngClass]="{
					'input-error': recordForm.get('url')?.touched && recordForm.get('url')?.invalid
				}" />
			@if(recordForm.get('url')?.touched && recordForm.get('url')?.invalid){
			<div class="label">
				<span class="label-text-alt text-error">Please enter a valid URL</span>
			</div>
			}
		</label>

		<button type="submit" class="btn btn-primary w-full mt-4">Start Playwright CodeGen</button>
	</form>

	<p class="mt-4 text-center text-sm" [ngClass]="{ 'text-error': message.includes('Failed') }">
		{{ message }}
	</p>

	<!-- Replay Test Section -->
	<form [formGroup]="replayForm" (ngSubmit)="replayTest()" class="mt-6">
		<label class="form-control w-full">
			<div class="label">
				<span class="label-text">Replay Test</span>
				@if(replayForm.get('testName')?.touched && replayForm.get('testName')?.invalid){
				<span class="label-text-alt text-error">*Required</span>
				}
			</div>
			<input
				type="text"
				formControlName="testName"
				placeholder="Enter test name"
				class="input input-bordered w-full"
				[ngClass]="{
					'input-error': replayForm.get('testName')?.touched && replayForm.get('testName')?.invalid
				}" />
			@if(replayForm.get('testName')?.touched && replayForm.get('testName')?.invalid){
			<div class="label">
				<span class="label-text-alt text-error">Test name must be at least 3 characters</span>
			</div>
			}
		</label>

		<button type="submit" class="btn btn-secondary w-full mt-3">Replay Test</button>
	</form>

	<p class="mt-4 text-center text-sm" [ngClass]="{ 'text-error': replayMessage.includes('Failed') }">
		{{ replayMessage }}
	</p>
</div>
